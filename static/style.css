/* 基本的なレイアウトとフォント */
body {
  font-family: Arial, sans-serif;
  padding: 20px;
  max-width: 600px;
  margin: auto;
  background-image: url('/static/images/haikei.jpg');
  background-size: cover;          /* 画像が画面全体を覆うように調整 */
  background-position: center;     /* 画像の中央が表示されるように配置 */
  background-attachment: fixed;    /* スクロールしても背景画像が動かないように固定 */
  background-color: #f8f9fa;       /* 画像が読み込まれるまでの背景色 */
}

input, select, button {
  margin: 5px;
  padding: 8px;
  font-size: 14px;
}

.topic-label {
  font-size: 1.2em; /* 文字サイズを少し大きく */
  font-weight: bold; /* 太字を強調 */
  color: #333; /* 文字色を少し濃く */
  margin-top: 15px; /* 上の要素との間隔 */
  margin-bottom: 10px; /* 下の要素との間隔 */
  background-color: rgba(255, 255, 255, 0.8); /* 半透明の白背景を追加 */
  padding: 8px 12px; /* 内側の余白 */
  border-radius: 6px; /* 角を少し丸める */
  display: inline-block; /* 背景が文字幅に合うように */
}

.topic-label strong {
  /* strong タグ自体のスタイルは特に変更不要 */
  margin-right: 5px; /* 「議題:」とトピック名の間に少し隙間 */
}

/* メッセージ一覧 */
#messages {
  list-style: none;
  padding: 0;
  margin: 0;
}

#chat-scroll-container {
  border: 1px solid #ddd;
  border-radius: 8px;
  background: #fff; /* 背景色を設定 */
  margin-top: 20px;
}

/* 各メッセージのスタイル */
#messages li {
  margin: 8px;
  padding: 10px 15px;
  border-radius: 20px;
  max-width: 75%;
  word-wrap: break-word;
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
  display: flex;
  flex-direction: column;
}

    .message-content {
      white-space: pre-wrap;
    }

/* 自分のメッセージ */
#messages li.self {
  background: #dcf8c6;
  color: black;
  border-bottom-right-radius: 0;
}

/* 他の人のメッセージ */
#messages li.other {
  background: #ffffff;
  color: black;
  margin-right: auto;
  align-self: flex-start;
  border-bottom-left-radius: 0;
}

/* Geminiのメッセージ */
#messages li.gemini {
  background-color: #f0f4c3;
  color: #333;
  margin-right: auto;
  align-self: flex-start;
  border: 1px solid #d4e157;
  border-bottom-left-radius: 0;
}

/* 立場ラベルの基本スタイル */
.stance-label {
  display: inline-block;
  padding: 2px 6px;
  border-radius: 10px;
  font-size: 12px;
  font-weight: bold;
  margin-bottom: 4px;
  width: fit-content;
}

/* 立場ラベルの色分け */
.stance-opinion { background-color: #28a745; color: white; }
.stance-question { background-color: #ffc107; color: #333; }
.stance-facilitation { background-color: #6f42c1; color: white; }
.stance-info-provide { background-color: #17a2b8; color: white; }
.stance-gemini-question { background-color: #fd7e14; color: white; }
.stance-proposal { background-color: #007bff; color: white; }
.stance-gemini-answer { background-color: #d4e157; color: #333; }
.stance-argument { background: #dc3545; color: white; } /* 旧スタイル保持 */

/* 入力エリア */
.stance-btn {
  /* Bootstrapの .btn スタイルを継承しつつ、必要な調整のみ行う */
  font-weight: bold;
  font-size: 13px;
  flex-grow: 1;
  white-space: nowrap;
}

#message-input {
  resize: none;
  overflow-y: auto;
  max-height: 150px;
}

button {
  background-color: #1da1f2;
  color: white;
  border: none;
  border-radius: 4px;
  padding: 8px 12px;
  cursor: pointer;
  font-weight: bold;
}

button:disabled {
  background-color: #a0cfff;
  cursor: not-allowed;
}
#finish-btn {
  margin-top: 10px;
  background-color: #28a745;
  width: 100%;
}
#back-to-roomlist-btn {
  margin-top: 10px;
  background-color: #aaa;
}

/* ファイルアップロードと進行状況確認ボタン */
.controls-area {
  margin-top: 10px;
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

/* .controls-area の中のボタンとラベルに共通のスタイルを適用 */
.controls-area button,
.controls-area .file-upload-label {
  padding: 8px 12px;
  border-radius: 4px;
  border: none;
  cursor: pointer;
  font-weight: bold;
  font-family: Arial, sans-serif; /* フォントを統一 */
  font-size: 14px;               /* 文字サイズを統一 */
  color: white;
  flex-shrink: 0;
  display: inline-block; /* 表示形式を統一 */
  line-height: normal;   /* 行の高さを統一 */
}

.file-upload-label {
  background-color: #ff9800;
}
#progress-check-btn {
  background-color: #6c757d;
}
#facilitate-btn { /* AIファシリテーションボタンのID */
  background-color: #007bff;
}
#file-name {
  margin-left: 8px;
  font-size: 14px;
}

/* モーダルウィンドウ */
.modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.4); }
.modal-content { background-color: #fefefe; margin: 15% auto; padding: 20px; border: 1px solid #888; width: 80%; max-width: 500px; border-radius: 8px; position: relative; }
.modal-content.large {
    max-width: 800px; /* 幅を広く */
    margin: 5% auto; /* 上部のマージンを減らす */
}
.close-btn { color: #aaa; position: absolute; top: 10px; right: 15px; font-size: 28px; font-weight: bold; cursor: pointer; }
#progress-content { white-space: pre-wrap; max-height: 400px; overflow-y: auto; background: #f9f9f9; border: 1px solid #eee; padding: 10px; border-radius: 4px; }

/* 議事録サマリー */
#messages li.summary {
  background-color: #e7f5e7;
  color: #333;
  max-width: 100%;
  border: 1px solid #28a745;
}
.summary-content { white-space: pre-wrap; }
.summary-pdf-link { display: block; margin-top: 15px; font-weight: bold; }


/* 返信機能 */
#replying-to-banner {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px;
  background-color: #e7f3ff;
  border-radius: 4px;
  margin-bottom: 10px;
  border: 1px solid #cce0ff;
}
#cancel-reply-btn {
  background: none;
  border: none;
  font-size: 18px;
  cursor: pointer;
  color: #666;
}
.reply-quote-container {
  background-color: rgba(0, 0, 0, 0.04);
  padding: 6px 10px;
  border-radius: 8px;
  margin-bottom: 6px;
  border-left: 3px solid #ccc;
  font-size: 13px;
}
.reply-quote-user { font-weight: bold; }
.reply-quote-content { opacity: 0.8; }

/* リアクションとメッセージフッター */
.message-meta {
  font-size: 13px; /* 少し大きく */
  font-weight: bold; /* 太字に */
  color: #333; /* 少し濃く */
  margin-bottom: 4px; /* 本文との間に少し余白 */
}

.message-footer {
  display: flex;
  justify-content: space-between;
  align-items: flex-end;
  margin-top: 8px;
}

.reaction-buttons-container {
  display: flex;
  gap: 4px;
}
.reaction-btn {
  background: #f0f2f5;
  border: 1px solid #ddd;
  border-radius: 12px;
  padding: 2px 6px;
  font-size: 12px;
  cursor: pointer;
  display: flex;
  align-items: center;
}
.reaction-count {
  font-size: 11px;
  margin-left: 4px;
  font-weight: bold;
  color: #555;
}
.reply-btn {
  background: none;
  border: none;
  cursor: pointer;
  font-size: 12px;
  color: #007bff;
  padding: 0;
  margin-left: 8px;
  font-weight: normal;
}

#fixed-action-buttons {
  position: fixed; /* 画面に固定 */
  top: 20px;       /* 画面上端からの距離 */
  right: 20px;      /* 画面右端からの距離 */
  z-index: 1001;    /* モーダルより手前に表示 */
  display: flex;
  flex-direction: column; /* ボタンを縦に並べる */
  gap: 10px; /* ボタン間の隙間 */
}

/* --- 共有ノート機能のスタイル --- */
#shared-note-btn, #proposal-form-btn {
  background-color: #6c757d;
  color: white;
  border: none;
  border-radius: 50%; /* 円形にする */
  width: 60px;        /* ボタンの幅 (大きくする) */
  height: 60px;       /* ボタンの高さ (幅と合わせる) */
  font-size: 28px;    /* 絵文字のサイズ */
  display: flex; 
  align-items: center; 
  justify-content: center;
  cursor: pointer;
  box-shadow: 0 2px 5px rgba(0,0,0,0.2); /* 影を追加 */
  transition: background-color 0.2s ease;
  padding-top: 3px; /* 絵文字の位置微調整 */
  box-sizing: border-box; 
}

#shared-note-btn:hover, #proposal-form-btn:hover {
  background-color: #5a6268;
}

#proposal-form-btn {
  background-color: #007bff; /* 共有ノートと色を変える */
}
#proposal-form-btn:hover {
  background-color: #0056b3;
}

#shared-note-textarea {
  width: 100%; /* 横はウィンドウに合わせた大きさに */
  height: 400px; /* デフォルトの縦の高さ */
  resize: vertical; /* 縦のみ長さが変更できるように */
  box-sizing: border-box; /* padding/border を幅に含める */
  padding: 10px;
  font-family: Arial, sans-serif;
  font-size: 14px;
  border: 1px solid #ccc;
  border-radius: 4px;
}

/* --- ホーム画面ヘッダー --- */
.main-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 2px solid #eee;
  padding-bottom: 10px;
}

.main-header h1 {
  margin: 0;
}

.dev-tools-link {
  text-decoration: none;
  background-color: #6c757d;
  color: white;
  padding: 10px 15px;
  border-radius: 6px;
  font-weight: bold;
  white-space: nowrap;
}
.dev-tools-link:hover {
  background-color: #5a6268;
}

/* --- 開発者ツールページ --- */
.analytics-section {
  margin-bottom: 40px;
  padding: 20px;
  border: 1px solid #eee;
  border-radius: 8px;
  background-color: #fff;
}
.chart-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
  gap: 20px;
}
.chart-container {
  position: relative;
  width: 100%;
}
/* --- 開発者ツールページのテーブルスタイル --- */
.analytics-section table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 15px;
    font-size: 14px;
}

.analytics-section th,
.analytics-section td {
    border: 1px solid #ddd;
    padding: 8px 12px;
    text-align: left;
}

.analytics-section th {
    background-color: #f2f2f2;
    font-weight: bold;
}

.analytics-section tbody tr:nth-child(even) {
    background-color: #f9f9f9;
}

#note-close-btn {
  font-size: 36px;
  top: 5px;
}

/* --- ヘッダーボタンの共通スタイル --- */
.header-buttons {
  display: flex;
}

#participants-btn {
  background-color: #6c757d;
  border: none;
  color: white;
  padding: 10px 15px;
  border-radius: 6px;
  cursor: pointer;
  font-weight: bold;
  font-size: 14px; /* サイズを統一 */
}

#participants-btn:hover {
  background-color: #5a6268;
}

/* --- 参加者一覧のスタイル --- */
#participants-list {
  list-style: none;
  padding: 0;
  margin-top: 15px;
}

#participants-list li {
  background-color: #f8f9fa;
  padding: 10px;
  border-bottom: 1px solid #ddd;
}
#participants-list li:last-child {
  border-bottom: none;
}


/* 自分のメッセージのラッパー(全体を右に寄せる) */
.message-wrapper.self {
  display: flex;
  justify-content: flex-end;
  align-items: center;
  margin-left: auto; /* この行が全体を右に寄せる役割を果たします */
}

/* 自分のメッセージの吹き出し本体のスタイル */
/* (位置に関する指定は削除し、見た目のみに限定) */
#messages li.self {
  background: #dcf8c6;
  color: black;
  /* margin-left: auto; や align-self: flex-end; は અહીં不要 */
  border-bottom-right-radius: 0;
}

/* 削除ボタンのスタイル */
.delete-msg-btn {
  background: none;
  border: none;
  cursor: pointer;
  font-size: 18px;
  padding: 0;
  margin-right: 8px; /* 吹き出しとの間のスペース */
  opacity: 0.2;
  transition: opacity 0.2s ease-in-out;
}

.system-message {
  text-align: center;
  color: gray;
  font-style: italic;
  font-size: 13px;
  background-color: #f0f0f0;
  max-width: 90%;
  margin: 8px auto; /* 中央に配置 */
  box-shadow: none;
}

/* マウスが乗った時にボタンをはっきり表示 */
.message-wrapper.self:hover .delete-msg-btn {
  opacity: 1;
}
/* --- 提案一覧エリア --- */
#proposals-area {
  position: sticky;
  top: 0px;
  z-index: 10;
  background-color: #ffffff; /* [変更] 背景を真っ白に */
  border: 1px solid #ddd; /* [変更] 枠線を復活 */
  border-radius: 8px;
  padding: 10px 15px;
  margin-top: 20px; /* [変更] 上の要素とのマージン */
  margin-bottom: 15px; /* [変更] チャット欄とのマージン */
  box-shadow: 0 1px 3px rgba(0,0,0,0.05); /* [追加] 薄い影を追加して立体感を出す */
}
#proposal-list {
  list-style: none;
  padding: 0;
  margin: 0;
  max-height: 150px; /* [追加] 提案が多くなった場合に備え、高さを制限してスクロール */
  overflow-y: auto;
}
.proposal-item {
  border-bottom: 1px solid #e0e0e0;
  padding: 10px 5px;
}
.proposal-item:last-child {
  border-bottom: none;
}
.proposal-header {
  font-size: 13px;
  color: #333;
}
.proposal-content {
  font-size: 15px;
  margin: 5px 0;
  white-space: pre-wrap; /* 提案内容の改行を保持 */
  word-wrap: break-word;
}
.proposal-controls {
  display: flex;
  gap: 8px;
  margin-top: 5px;
  align-items: center;
}
/* 提案一覧内のボタンは、チャット入力欄のボタンとスタイルを区別する */
.proposal-controls button {
  padding: 3px 10px;
  font-size: 12px;
  border-radius: 12px;
  cursor: pointer;
  font-weight: normal;
}
.proposal-reply-btn {
  background-color: #f0f2f5;
  color: #333;
  border: 1px solid #ccc;
}
.proposal-reply-btn:hover {
  background-color: #e4e6e9;
}
.proposal-resolve-btn {
  background-color: #e7f5e7;
  color: #28a745;
  border: 1px solid #28a745;
}
.proposal-resolve-btn:hover {
  background-color: #d4eed4;
}

.proposal-pagination {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 15px;
  padding-bottom: 10px;
  border-bottom: 1px solid #eee;
}
#proposal-page-indicator {
  font-weight: bold;
}
.proposal-form-q {
  margin-bottom: 15px;
}
.proposal-form-q label {
  display: block;
  font-weight: bold;
  font-size: 14px;
  margin-bottom: 5px;
}
.proposal-form-q textarea,
.proposal-form-q input[type="text"] {
  width: 100%;
  padding: 8px;
  border: 1px solid #ccc;
  border-radius: 4px;
  box-sizing: border-box; /* padding を幅に含める */
  font-size: 14px;
  margin: 0; /* button のデフォルトマージンをリセット */
}
.proposal-form-q textarea {
  resize: vertical;
}
.proposal-form-q .radio-group {
  display: flex;
  gap: 15px;
  align-items: center;
}
.proposal-form-q .radio-group input[type="radio"] {
  margin: 0 0 0 5px;
}
.proposal-form-q .radio-group label {
  margin-bottom: 0;
  font-weight: normal;
}
/* --- スマホ対応（レスポンシブ設定） --- */
@media (max-width: 768px) {
  body {
    max-width: 100%;      /* 横幅制限（600px）を解除して画面いっぱいに */
    padding: 10px 5px;    /* 画面端の余白を少し減らす */
    margin: 0;            /* 外側の余白をゼロに */
  }

  /* メッセージの吹き出しを少し広くする */
  #messages li {
    max-width: 88%;       /* 吹き出しの横幅制限を緩める */
    font-size: 15px;      /* 文字を少し大きくして読みやすく */
  }

  /* 入力エリアの調整 */
  #input-area .card-body {
    padding: 10px;        /* 入力欄周りの余白を詰める */
  }

  /* ボタン類を押しやすく大きくする */
  button, .stance-btn {
    padding: 10px 12px;   /* タップしやすいように少し大きく */
  }
}

#notification-btn {
  margin-left: 5px;
  background-color: #17a2b8; /* デフォルトの色（青） */
  color: white;
  border: none;
  border-radius: 4px; /* 他のボタンと合わせる */
  padding: 8px 12px;
  font-weight: bold;
  cursor: pointer;
  display: inline-block; /* 確実に表示させる */
}

/* 黄色い警告ボタン用（JSでクラスを付け替える場合などに備えて） */
#notification-btn.warning {
  background-color: #ffc107 !important;
  color: black !important;
}